import { React, useState, useEffect, useContext } from "react"
import { ThemeContext } from "../utils/ThemeContext"
import { Link } from "react-scroll";

import {
    AppBar,
    Toolbar,
    styled
} from '@mui/material';

const StyledAppBar = styled(AppBar)(({ theme }) => ({
    backgroundColor: `${theme.palette.background.primary}00`,
    transition:
        "all 0.4s cubic-bezier(0.645,0.045,0.355,1), background-color 0ms !important",
    transitionDelay: "0.1s",
    boxShadow: "none !important",
    padding: "0.5rem",
}));

const StyledAppBarContainer = styled("div")(({ theme }) => ({
    flexDirection: "column",
    alignItems: "center",
    alignSelf: "center",
    maxWidth: "1200px",
    justifyContent: "center",
    width: "90vw !important",
    [theme.breakpoints.down("md")]: {
        width: "100vw !important",
    },
}));

const StyledLogo = styled(Link)(({ theme }) => ({
    cursor: "pointer",
    "& svg": {
        fill: theme.palette.text.primary,
    },
}));

const Navbar = () => {
    const { theme, setTheme } = useContext(ThemeContext);
    const [hasAnimated, setHasAnimated] = useState(false);

    useEffect(() => {
        setTimeout(() => {
            setHasAnimated(true);
        }, 1000);
    }, []);

    useEffect(() => {
        window.localStorage.setItem("theme", theme);
    }, [theme]);

    return (
        <StyledAppBar position='fixed'>
            <StyledAppBarContainer>
                <Toolbar style={{ display: "flex", justifyContent: "space-between" }}>
                    <StyledLogo
                        href="#Home"
                        to="Home"
                        smooth={true}
                        duration={1000}
                    >
                        <svg
                        style={{
                            width: "250px",
                            animation: !hasAnimated
                                ?
                                "fadeInDown"
                                : "",
                            animationDuration: "1s",
                        }}
                        viewBox="0 0 3000 574.446"
                        >
                            <defs>
                                <clipPath id="b">
                                    <path d="M79.663-2v578.446h578.446V-2H79.663ZM629.919,409.513l-42.423-24.484c13.634-30.442,20.829-63.663,20.829-97.807,0-9.416-.556-18.774-1.639-28.044l50.413,29.031c-.144,42.363-9.537,83.671-27.179,121.304Z" fill="none" />
                                </clipPath>
                            </defs>
                            <g>
                                <g>
                                    <path d="M1045.724,217.72c-9.371-15.619-35.142-30.456-64.818-30.456-38.265,0-56.618,16.009-56.618,36.314,0,23.818,28.113,30.456,60.913,34.361,57.008,7.028,110.111,21.866,110.111,87.074,0,60.913-53.885,87.074-114.797,87.074-55.836,0-98.788-17.181-119.092-67.16l42.951-22.257c12.104,30.066,43.732,43.342,76.922,43.342,32.409,0,62.865-11.324,62.865-40.999,0-25.771-26.942-36.314-63.256-40.218-55.837-6.638-107.379-21.476-107.379-82.779,0-56.227,55.446-79.265,105.817-79.655,42.561,0,86.683,12.104,107.379,54.275l-40.999,21.085Z" fill="#a0a0a0" />
                                    <path d="M1338.964,425.058h-204.604V151.731h204.604v49.98h-153.453v62.865h147.987v48.027h-147.987v61.694h153.453v50.761Z" fill="#a0a0a0" />
                                    <path d="M1582.614,425.058h-204.604V151.731h204.604v49.98h-153.453v62.865h147.987v48.027h-147.987v61.694h153.453v50.761Z" fill="#a0a0a0" />
                                    <path d="M1810.254,151.34h51.542v273.717h-32.018v.391l-143.692-184.691v184.3h-51.542V151.731h41.78l133.93,169.463v-169.853Z" fill="#a0a0a0" />
                                    <path d="M2745.414,153.293l-121.435,130.806,131.588,137.835v3.124h-63.647l-114.407-121.045v121.045h-51.542V151.731h51.542v115.578l103.864-115.578h64.037v1.562Z" fill="#a0a0a0" />
                                    <path d="M2950.411,217.72c-9.371-15.619-35.142-30.456-64.818-30.456-38.265,0-56.618,16.009-56.618,36.314,0,23.818,28.113,30.456,60.913,34.361,57.008,7.028,110.111,21.866,110.111,87.074,0,60.913-53.885,87.074-114.797,87.074-55.836,0-98.788-17.181-119.092-67.16l42.951-22.257c12.104,30.066,43.732,43.342,76.922,43.342,32.409,0,62.865-11.324,62.865-40.999,0-25.771-26.942-36.314-63.256-40.218-55.837-6.638-107.379-21.476-107.379-82.779,0-56.227,55.446-79.265,105.817-79.655,42.561,0,86.683,12.104,107.379,54.275l-40.999,21.085Z" fill="#a0a0a0" />
                                </g>
                                <g>
                                    <path d="M1973.698,416.986l15.802-47.22c-26.164-17.589-37.121-48.801-37.899-78.639-1.172-46.075,25.38-98.007,89.807-98.007,2.435,0,4.807.082,7.132.227l15.269-45.627c-7.145-.95-14.608-1.455-22.401-1.455-94.493,0-140.568,72.236-140.568,144.082,0,52.081,23.399,102.717,72.858,126.64Z" fill="#a0a0a0" />
                                    <path d="M2107.595,160.788l-15.555,46.481c27.639,18.5,39.315,52.237,38.785,83.468-.781,44.903-24.99,93.321-89.417,93.321-2.894,0-5.703-.101-8.435-.29l-15.397,46.007c7.562.997,15.499,1.529,23.832,1.529,96.055,0,139.397-70.675,140.178-141.349.568-52.054-24.151-104.513-73.991-129.168Z" fill="#a0a0a0" />
                                </g>
                                <g>
                                    <path d="M2280.224,416.993l15.802-47.218c-26.173-17.587-37.133-48.804-37.911-78.647-1.172-46.075,25.38-98.007,89.807-98.007,2.44,0,4.817.083,7.146.227l15.269-45.626c-7.15-.951-14.616-1.457-22.416-1.457-94.493,0-140.568,72.236-140.568,144.082,0,52.085,23.403,102.725,72.87,126.646Z" fill="#a0a0a0" />
                                    <path d="M2414.121,160.794l-15.556,46.483c27.631,18.502,39.303,52.234,38.774,83.46-.781,44.903-24.99,93.321-89.417,93.321-2.889,0-5.693-.1-8.421-.289l-15.397,46.008c7.558.996,15.49,1.527,23.818,1.527,96.055,0,139.397-70.675,140.178-141.349.568-52.05-24.147-104.505-73.979-129.162Z" fill="#a0a0a0" />
                                </g>
                            </g>
                            <g>
                                <path d="M368.886,0C210.257,0,81.663,128.594,81.663,287.223s128.594,287.223,287.223,287.223,287.223-128.594,287.223-287.223S527.515,0,368.886,0ZM368.886,527.661c-132.791,0-240.438-107.648-240.438-240.438S236.096,46.784,368.886,46.784s240.438,107.648,240.438,240.438-107.648,240.438-240.438,240.438Z" fill="#a0a0a0" />
                                <g>
                                    <polygon points="64.478 160.171 403.057 355.823 338.579 393.099 0 197.211 64.478 160.171 64.478 160.171" fill="#444" />
                                    <polygon points="364.253 181.728 364.259 226.581 299.725 263.798 299.697 218.932 364.253 181.728 364.253 181.728" fill="#2b2b2b" />
                                    <polygon points="364.259 226.581 456.877 280.008 392.343 317.29 299.725 263.798 364.259 226.581 364.259 226.581" fill="#444" />
                                    <polygon points="456.877 280.008 456.769 448.854 392.324 486.186 392.343 317.29 456.877 280.008 456.877 280.008" fill="#2b2b2b" />
                                    <polygon points="310.496 88.616 759.476 347.165 694.887 384.625 245.907 125.764 310.496 88.616 310.496 88.616" fill="#444" />
                                    <polygon points="759.476 347.165 759.284 409.438 694.727 446.916 694.887 384.625 759.476 347.165 759.476 347.165" fill="#2b2b2b" />
                                    <polygon points="694.887 384.625 694.727 446.916 299.697 218.932 299.725 263.798 392.343 317.29 392.324 486.186 .19 259.086 0 197.211 338.579 393.099 338.565 348.3 246.088 294.836 245.907 125.764 694.887 384.625 694.887 384.625" fill="#777" />
                                </g>
                                <g clip-path="url(#b)">
                                    <path d="M368.886,0C210.257,0,81.663,128.594,81.663,287.223s128.594,287.223,287.223,287.223,287.223-128.594,287.223-287.223S527.515,0,368.886,0ZM368.886,527.661c-132.791,0-240.438-107.648-240.438-240.438S236.096,46.784,368.886,46.784s240.438,107.648,240.438,240.438-107.648,240.438-240.438,240.438Z" fill="#a0a0a0" />
                                </g>
                            </g>
                        </svg>
                    </StyledLogo>
                </Toolbar>
            </StyledAppBarContainer>
        </StyledAppBar>
    )
}

export default Navbar